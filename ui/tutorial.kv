<GameManager>:
    SoloMenu
        id: s1
    PlayMenu
        id: s2
    AddCard
        id: s3
    DeckMenu
        id: s4
    MainMenu
        id: s5
    PlayDeck
        id: s6

<MainMenu>
    name: 'main_menu'
    BoxLayout:
        orientation: 'vertical'
        canvas:
            Color:
                rgba: 0,0,0.1,1
            Rectangle:
                pos: self.pos
                size: self.size
        BoxLayout
        BoxLayout
            size_hint_y: .4
            BoxLayout
                orientation: 'vertical'
                Label:
                    text: 'L I E'
                    bold: True
                    font_size: '72dp'
                    color: 0.5,0,0,1
                Label:
                    size_hint_y: 0.1
                    text: '-- learning is easy --'
                Widget
                    size_hint_y: .4
            Widget
            Widget

        BoxLayout
            orientation: 'vertical'
            size_hint_y: .15
            BoxLayout:
                spacing: '12dp'
                Widget
                    size_hint_x: .05
                Button
                    background_color: 1,1,1,1
                    background_normal: ''
                    text: 'Play'
                    color: 0.6,0,0,1
                    on_release: root.manager.current = 'play_menu'
                Button
                    text: 'Solo Adventures'
                    color: 0.6,0,0,1
                    background_normal: ''
                    on_release: root.manager.current = 'solo_menu'
                Button
                    text: 'Collection'
                    color: 0.6,0,0,1
                    background_normal: ''
                    on_release: root.manager.current = 'deck_menu'
                Widget
                    size_hint_x: .05
            Widget
                size_hint_y: .5
#    BoxLayout:
#        canvas:
#            Color:
#                rgba: 0,0,0.1,1
#            Rectangle:
#                pos: self.pos
#                size: self.size
#        BoxLayout:
#            size_hint_x: 0.6
#            orientation: 'vertical'
#            Widget
#            AnchorLayout:
#                anchor_x: 'left'
#               anchor_y: 'bottom'
#                Label:
#                    size_hint: 0.4, 0.1
#                    font_size: '10dp'
#                    text: 'version 1.00'
#        BoxLayout
#            #size_hint_y: 0.7
#            orientation: 'vertical'
#            spacing: '20dp'
#            BoxLayout:
#                orientation: 'vertical'
#                Label:
#                    text: 'L I E'
#                    bold: True
#                    font_size: '72dp'
#                    color: 0.5,0,0,1
#                Label:
#                    size_hint_y: 0.1
#                    text: '-- learning is easy --'
#            Widget:
#                size_hint_y: 0.5
#            BoxLayout
#                spacing: 5
#                orientation: 'vertical'
#                canvas:
#                    Color:
#                        rgba: 0,0.6,1,1
#                    Rectangle:
#                        pos: self.pos
#                        size: self.size
#                Button
#                    background_color: 1,1,1,1
#                    background_normal: ''
#                    text: 'Play'
#                    color: 0.6,0,0,1
#                    on_state: root.manager.current = 'play_menu'
#                Button
#                    text: 'Solo Adventures'
#                    color: 0.6,0,0,1
#                    background_normal: ''
#                    on_state: root.manager.current = 'solo_menu'
#                Button
#                    text: 'Collection'
#                    color: 0.6,0,0,1
#                    background_normal: ''
#                    on_state: root.manager.current = 'deck_menu'
#            Widget:
#                size_hint_y: 0.5
#        Widget:
#            size_hint_x: 0.6
<PlayMenu>
    name: 'play_menu'
    SlideMenu
        id: smsm
        anim_type: 'slide_above_anim'
        BoxLayout:
            orientation: 'vertical'
            spacing: '1dp'
            Button:
                text: 'Decks'
                text_size: self.width *1/2 ,  None
                on_x: self.state = 'normal'
                on_release: if smsm._anim_progress >=1 : print 'decks pressed'
                color:[0,0,0,.8]
                background_normal: ''
                background_color: 1,1,1,1
            Button:
                text: 'Card Browser'
                color:[0,0,0,.8]
                text_size: self.width *1/2 ,  None
                on_x: self.state = 'normal'
                on_release: if smsm._anim_progress >=1 : print 'card browser pressed'
                background_normal: ''
                background_color: 1,1,1,1
            Button:
                text: 'Statistics'
                text_size: self.width *1/2 ,  None
                on_x: self.state = 'normal'
                on_release: if smsm._anim_progress >=1 : print 'statistics pressed'
                color:[0,0,0,.8]
                background_normal: ''
                background_color: 1,1,1,1
            Button:
                text: 'Settings'
                text_size: self.width *1/2 ,  None
                on_x: self.state = 'normal'
                on_release: if smsm._anim_progress >=1 : print 'settings pressed'
                color:[0,0,0,.8]
                background_normal: ''
                background_color: 1,1,1,1
            Button:
                text: 'Help'
                text_size: self.width *1/2 ,  None
                on_x: self.state = 'normal'
                on_release: if smsm._anim_progress >=1 : print 'halp pressed'
                color:[0,0,0,.8]
                background_normal: ''
                background_color: 1,1,1,1
            Button:
                text: 'Send feedback'
                text_size: self.width *1/2 ,  None
                on_x: self.state = 'normal'
                on_release: if smsm._anim_progress >=1 : print 'send feedback pressed'
                color:[0,0,0,.8]
                background_normal: ''
                background_color: 1,1,1,1
            Widget:
                size_hint: 1,2.5
                canvas:
                    Color:
                        rgba: 1,1,1,1
                    Rectangle:
                        pos: self.pos
                        size: self.size
        Label:
            text: 'This Page is under construction  Check back soon'
<SoloMenu>
    name: 'solo_menu'
    FloatLayout:
        ActionBar:
            background_color: 0,.6,1,1
            id: ac
            pos_hint: {'top':1}
            ActionView:
                use_separator: True
                ActionPrevious:
                    with_previous: False
                    size_hint_x: None
                    width: self.height
                    on_release: smsm.toggle_state()
                ActionLabel:
                    id: aclabel
                    text: 'SoloAdventures'
                    text_size: self.width  , None
                ActionGroup:
                    text: 'Add'
                    ActionButton:
                        text: 'Add card'
                        on_release: root.manager.current = 'add_card'
                    ActionButton:
                        id: cdb
                        text: 'Create deck'
                        on_release: root.show_createdeck()
                ActionButton:
                    text: 'Backup'
                ActionButton:
                    text: 'Help'
    SlideMenu
        id: smsm
        size_hint_y: None
        height: root.height - ac.height
        anim_type: 'slide_above_anim'
        BoxLayout:
            orientation: 'vertical'
            spacing: '1dp'
            Button:
                text: 'Decks'
                text_size: self.width *1/2 ,  None
                on_x: self.state = 'normal'
                on_release: if smsm._anim_progress >=1 : print 'decks pressed'
                color:[0,0,0,.8]
                background_normal: ''
                background_color: 1,1,1,1
            Button:
                text: 'Card Browser'
                color:[0,0,0,.8]
                text_size: self.width *1/2 ,  None
                on_x: self.state = 'normal'
                on_release: if smsm._anim_progress >=1 : print 'card browser pressed'
                background_normal: ''
                background_color: 1,1,1,1
            Button:
                text: 'Statistics'
                text_size: self.width *1/2 ,  None
                on_x: self.state = 'normal'
                on_release: if smsm._anim_progress >=1 : print 'statistics pressed'
                color:[0,0,0,.8]
                background_normal: ''
                background_color: 1,1,1,1
            Button:
                text: 'Settings'
                text_size: self.width *1/2 ,  None
                on_x: self.state = 'normal'
                on_release: if smsm._anim_progress >=1 : print 'settings pressed'
                color:[0,0,0,.8]
                background_normal: ''
                background_color: 1,1,1,1
            Button:
                text: 'Help'
                text_size: self.width *1/2 ,  None
                on_x: self.state = 'normal'
                on_release: if smsm._anim_progress >=1 : print 'halp pressed'
                color:[0,0,0,.8]
                background_normal: ''
                background_color: 1,1,1,1
            Button:
                text: 'Send feedback'
                text_size: self.width *1/2 ,  None
                on_x: self.state = 'normal'
                on_release: if smsm._anim_progress >=1 : print 'send feedback pressed'
                color:[0,0,0,.8]
                background_normal: ''
                background_color: 1,1,1,1
            Widget:
                size_hint: 1,2.5
                canvas:
                    Color:
                        rgba: 1,1,1,1
                    Rectangle:
                        pos: self.pos
                        size: self.size
        ScrollBox
            BoxLayout:
                id: bl
                size_hint_y: None
                height: fl1.height
                canvas:
                    Color:
                        rgba: 1,1,1,.9
                    Rectangle:
                        pos: self.pos
                        size: self.size
                Widget:
                    size_hint_x: .05
                FloatLayout:
                    size_hint_y: None
                    height: root.height - ac.height
                    id: fl1
                    Button:
                        id: b1
                        size_hint_y: None
                        height: '50dp'
                        x: fl1.x
                        y: root.height - ac.height - self.height * 3/2
                        color: 0,0,0,1
                        text_size: (self.width * 4.7/5.7 , None)
                        background_normal: ''
                        background_color: 1,1,1,1
                        on_release: root.manager.switch_to_deckplay(self)

                Widget:
                    size_hint_x: .05
<DeckMenu>
    name: 'deck_menu'
    FloatLayout:
        ActionBar:
            background_color: 0,.6,1,1
            id: ac3
            #background_image: ''
            pos_hint: {'top':1}
            ActionView:
                use_separator: True
                ActionPrevious:
                    with_previous: False
                    size_hint_x: None
                    width: self.height
                    #previous_image: ''
                    on_release: pmsm.toggle_state()
                ActionLabel:
                    id: aclabel
                    text: 'Collection'
                    text_size: self.width  , None

    SlideMenu
        id: smsm
        size_hint_y: None
        height: root.height - ac3.height
        anim_type: 'slide_above_anim'
        BoxLayout:
            orientation: 'vertical'
            spacing: '1dp'
            Button:
                text: 'Decks'
                text_size: self.width *1/2 ,  None
                on_x: self.state = 'normal'
                on_release: if smsm._anim_progress >=1 : print 'decks pressed'
                color:[0,0,0,.8]
                background_normal: ''
                background_color: 1,1,1,1
            Button:
                text: 'Card Browser'
                color:[0,0,0,.8]
                text_size: self.width *1/2 ,  None
                on_x: self.state = 'normal'
                on_release: if smsm._anim_progress >=1 : print 'card browser pressed'
                background_normal: ''
                background_color: 1,1,1,1
            Button:
                text: 'Statistics'
                text_size: self.width *1/2 ,  None
                on_x: self.state = 'normal'
                on_release: if smsm._anim_progress >=1 : print 'statistics pressed'
                color:[0,0,0,.8]
                background_normal: ''
                background_color: 1,1,1,1
            Button:
                text: 'Settings'
                text_size: self.width *1/2 ,  None
                on_x: self.state = 'normal'
                on_release: if smsm._anim_progress >=1 : print 'settings pressed'
                color:[0,0,0,.8]
                background_normal: ''
                background_color: 1,1,1,1
            Button:
                text: 'Help'
                text_size: self.width *1/2 ,  None
                on_x: self.state = 'normal'
                on_release: if smsm._anim_progress >=1 : print 'halp pressed'
                color:[0,0,0,.8]
                background_normal: ''
                background_color: 1,1,1,1
            Button:
                text: 'Send feedback'
                text_size: self.width *1/2 ,  None
                on_x: self.state = 'normal'
                on_release: if smsm._anim_progress >=1 : print 'send feedback pressed'
                color:[0,0,0,.8]
                background_normal: ''
                background_color: 1,1,1,1
            Widget:
                size_hint: 1,2.5
                canvas:
                    Color:
                        rgba: 1,1,1,1
                    Rectangle:
                        pos: self.pos
                        size: self.size
        BoxLayout:
            canvas:
                Color:
                    rgba: 1,1,1,.9
                Rectangle:
                    pos: self.pos
                    size: self.size
            Label
                text: 'This Page is under construction  Check back soon'
                color: 0,0,0,1

<PlayDeck>
    name: 'play_deck'
    BoxLayout:
        orientation: 'vertical'
        ActionBar:
            background_color: 0,.6,1,1
            id: ac
            #background_image: ''
            pos_hint: {'top':1}
            ActionView:
                ActionPrevious:
                    with_previous: True
                    size_hint_x: None
                    width: self.height
                    on_release: root.manager.current = 'solo_menu'
                ActionLabel:
                    id: action_deck_label
                    text_size: self.width  , None
                ActionButton:
                    text: 'Add card'
                    on_release: root.manager.current = 'add_card'
        BoxLayout:
            canvas:
                Color:
                    rgba: 1,1,1,.9
                Rectangle:
                    pos: self.pos
                    size: self.size
            Widget
                size_hint_x: .05
            BoxLayout
                spacing: '20dp'
                orientation: 'vertical'
                Widget:
                BoxLayout
                    orientation: 'vertical'
                    spacing: '5dp'
                    canvas:
                        Color:
                            rgba: 1,1,1,.9
                        Rectangle:
                            pos: self.pos
                            size: self.size
                    Label:
                        id: deck_label
                        color: 0,0,0,1
                        font_size: 20
                    Widget
                Button
                    size_hint_y: .5
                    background_normal: ''
                    background_color: 1,1,1,1
                    color: 0,0,0,1
                    text: 'Study'
                Widget
            Widget
                size_hint_x: .05

<AddCard>:
    name: 'add_card'
	FloatLayout:
        ActionBar:
            background_color: 0,.6,1,1
            id: ac2
            pos_hint: {'top':1}
            ActionView:
                ActionPrevious:
                    with_previous: True
                    size_hint_x: None
                    width: self.height
                    on_release: root.manager.current = 'solo_menu'
                ActionLabel:
                    text: 'Add new card'
                    text_size: self.width  , None
                ActionButton
                    id: ac_create_card
                    text: 'Create card'
                    on_release: root.ac_create_card(); root.yolo()
        BoxLayout:
            id: bbig
            size_hint_y: None
            height: '150dp'
            y: ac2.y - self.height
            orientation: 'vertical'
            canvas.before:
                Color:
                    rgba: 1,1,1,1
                Rectangle:
                    pos: self.pos
                    size: self.size
            BoxLayout:
                id: b1
                Label:
                    size_hint_x: 0.3
                    text: 'Card type:'
                    #text_size: self.width, None
                    color: 0,0,0,1
                Button:
                    canvas.before:
                        Color:
                            rgba: 0,0,0,1
                        Rectangle:
                            pos: self.x , self.y+self.height/4
                            size: self.width,1
                    canvas:
                        Color:
                            rgba: 0,0,0,1
                        Triangle:
                            points: self.x+self.width,self.y+self.height/4, self.x+self.width-12,self.y+self.height/4, self.x+self.width,self.y+ self.height/4+12
                    id: butp
                    text: 'Default'
                    text_size: self.width -self.width/4 , None
                    color: 0,0,0,1
                    background_color: 0,0,0,0
                    on_release: root.show_modal1()
            BoxLayout:
                Label:
                    size_hint_x: 0.3
                    text: 'Deck:'
                    #text_size: self.width, None
                    color: 0,0,0,1
                Button:
                    canvas.before:
                        Color:
                            rgba: 0,0,0,1
                        Rectangle:
                            pos: self.x , self.y+self.height/4
                            size: self.width,1
                    canvas:
                        Color:
                            rgba: 0,0,0,1
                        Triangle:
                            points: self.x+self.width,self.y+self.height/4, self.x+self.width-12,self.y+self.height/4, self.x+self.width,self.y+ self.height/4+12
                    id: butd
                    text: ''
                    color: 0,0,0,1
                    background_color: 0,0,0,0
                    background_normal: ''
                    text_size: self.width -self.width/4 , None
                    background_down: 'atlas://data/images/defaulttheme/button'
                    on_release: root.show_modal2()
        BoxLayout:
            size_hint_y: None
            height: root.height - ac2.height - butoane.height - bbig.height
            y: butoane.height
            orientation: 'vertical'
            BoxLayout
                Label
                    id: lab_q
                    color: 1,1,1,1
                Label
                    id: lab_a
                    color: 1,1,1,1
            Label
        BoxLayout:
            id: butoane
            size_hint_y: None
            height: '75dp'
            Button
                text: 'Add Card Question'
                on_release: root.show_modal3()
            Button
                text: 'Add Card Answer'
                on_release: root.show_modal4()
            Button
                text: 'Tags'
                on_release: root.show_modal5()
<CustomModal5>:
    background: ''
    size_hint: .6 ,.2
    pos_hint: {'left': .5 , 'top': .75}
    background_color: 0,0,0,.2
    BoxLayout:
        orientation: 'vertical'
        Label
            text: "Add Tags        (eg: Creier,Ficat)"
            text_size: self.width*6/7, None
            color: 0,0,0,1
        BoxLayout:
            Widget:
                size_hint_x: .05
            TextInput
                id: deck_txt
                font_size: '25dp'
            Widget:
                size_hint_x: .05
        BoxLayout:
            Button:
                id: but1
                canvas:
                    Color:
                        rgba: 0,0,0,1
                    Rectangle:
                        pos: self.x+self.width-1 , self.y+self.height/4
                        size: 1, self.height/2
                text: 'Done'
                color: 0,0,0,1
                background_normal: ''
                background_color: 1,1,1,1
                on_release: root.dismiss()
            Button:
                text: 'Cancel'
                color:0,0,0,1
                background_normal: ''
                background_color: 1,1,1,1
                on_release: root.dismiss()

<CustomModal3>:
    id: cm3
    background: ''
    size_hint: .8, .5
    pos_hint: {'left': .8, 'top': .9}
    background_color: 0,0,0,.5
    BoxLayout:
        orientation: 'vertical'
        BoxLayout:
            size_hint_y: tit.line_height/root.height
            Label
                text: 'Add Question'
                color: 0,0,0,1
                bold: True
                text_size: self.width * 3/4, None
            Label:
                text: 'Characters remaining 360'
                color: 0,0,0,1
        BoxLayout
            Widget:
                size_hint_x: .1
            TabTextInput:
                id: tit
                font_size: 35
            Widget:
                size_hint_x: .1
        BoxLayout
            size_hint_y: 0.3
            spacing: 10
            Button
                text: 'Cancel'
                on_release: root.dismiss()
            Button
                id: done
                text: 'Done'
                on_release: root.dismiss()
            Button
                id: answer
                text: 'Add Answer'
                on_release: root.dismiss()
<CustomModal4>:
    id: cm4
    background: ''
    size_hint: .8, .5
    pos_hint: {'left': .8, 'top': .9}
    background_color: 0,0,0,.5
    BoxLayout:
        orientation: 'vertical'
        BoxLayout:
            size_hint_y: tit.line_height/root.height
            Label
                text: 'Add Answer'
                color: 0,0,0,1
                bold: True
                text_size: self.width * 3/4, None
            Label:
                id: lab
                text: 'Characters remaining %d' % (360 - tit.cursor_row * tit.cursor_col)
                color: 0,0,0,1
        BoxLayout
            Widget:
                size_hint_x: .1
            TabTextInput:
                id: tit
                font_size: 35
            Widget:
                size_hint_x: .1
        BoxLayout
            size_hint_y: 0.3
            spacing: 10
            Button
                text: 'Cancel'
                on_release: root.dismiss()
            Button
                id: done
                text: 'Done'
                on_release: root.dismiss()
            Button
                id: create_card
                text: 'Create Card'
                on_release: root.dismiss()
<CustomModal1>:
    id: cm
    background: ''
    size_hint: .8, .3
    pos_hint: {'left': 0.7, 'top': .810}
    background_color: 0,0,0,.1
    BoxLayout:
        BoxLayout
            size_hint_x:2
            orientation: 'vertical'
            Button:
                canvas:
                    Color:
                        rgba: 0,0,0,1
                    Rectangle:
                        pos: self.pos
                        size: self.width, 1
                id: bu1
                text: 'Default'
                text_size: self.width -self.width/4, None
                color: 0,0,0,1
                background_color: 0,0,0,0
                on_press: ch1._toggle_active()
                on_release: root.dismiss()

            Button:
                canvas:
                    Color:
                        rgba: 0,0,0,1
                    Rectangle:
                        pos: self.pos
                        size: self.width, 1
                id: bu2
                text: 'Cloze'
                text_size: self.width -self.width/4, None
                color: 0,0,0,1
                background_color: 0,0,0,0
                on_press: ch2._toggle_active()
                on_release: root.dismiss()
            Button:
                id: bu3
                text: 'Lcoze'
                text_size: self.width - self.width/4 , None
                color: 0,0,0,1
                background_color: 0,0,0,0
                on_press: ch3._toggle_active()
                on_release: root.dismiss()
        BoxLayout
            BoxLayout
                orientation: 'vertical'
                CheckBox:
                    name: 'Default'
                    canvas:
                        Color:
                            rgba: 0,0,0,1
                        Rectangle:
                            pos: self.pos
                            size: self.width, 1
                    id: ch1
                    background_radio_normal: 'cerc.png'
                    background_radio_down: 'cerc_down.png'
                    on_release: root.dismiss()
                    group: 'pops'
                CheckBox:
                    name: 'Cloze'
                    canvas:
                        Color:
                            rgba: 0,0,0,1
                        Rectangle:
                            pos: self.pos
                            size: self.width, 1
                    id: ch2
                    background_radio_normal: 'cerc.png'
                    background_radio_down: 'cerc_down.png'
                    on_release: root.dismiss()
                    group: 'pops'
                CheckBox:
                    name: 'Lcoze'
                    value: 'down'
                    id: ch3
                    background_radio_normal: 'cerc.png'
                    background_radio_down: 'cerc_down.png'
                    on_release: root.dismiss()
                    group: 'pops'

<CustomModal2>:
    background: ''
    size_hint: .8 , None
    height: 0
    pos_hint: {'left': 0 , 'top': .685}
    background_color: 0,0,0,.1
    ScrollView
        GridLayout:
            id: gl1
            size_hint_y: None
            height: 0
            cols: 1

<CreateDeck>:
    background: ''
    size_hint: .6 ,.2
    pos_hint: {'left': .5 , 'top': .75}
    background_color: 0,0,0,.2
    BoxLayout:
        orientation: 'vertical'
        Label
            text: "Create new deck"
            text_size: self.width*6/7, None
            color: 0,0,0,1
        BoxLayout:
            Widget:
                size_hint_x: .05
            TextInput
                id: deck_txt
                font_size: '25dp'
            Widget:
                size_hint_x: .05
        BoxLayout:
            Button:
                id: but1
                canvas:
                    Color:
                        rgba: 0,0,0,1
                    Rectangle:
                        pos: self.x+self.width-1 , self.y+self.height/4
                        size: 1, self.height/2
                text: 'Create'
                color: 0,0,0,1
                background_normal: ''
                background_color: 1,1,1,1
                on_release: root.dismiss()
            Button:
                text: 'Cancel'
                color:0,0,0,1
                background_normal: ''
                background_color: 1,1,1,1
                on_release: root.dismiss()
